DROP TABLE IF EXISTS "user" CASCADE;
DROP TABLE IF EXISTS "contact_info" CASCADE;
DROP TABLE IF EXISTS "mech" CASCADE;
DROP TABLE IF EXISTS "picture" CASCADE;
DROP TABLE IF EXISTS "rating" CASCADE;

CREATE TABLE "user" (
  "id" SERIAL PRIMARY KEY,
  "username" varchar,
  "password" varchar,
  "firstname" varchar,
  "lastname" varchar,
  "is_pilot" boolean,
  "is_admin" boolean
);

CREATE TABLE "contact_info" (
  "id" SERIAL PRIMARY KEY,
  "user_id" integer,
  "contact" varchar
);

CREATE TABLE "mech" (
  "id" SERIAL PRIMARY KEY,
  "make" varchar,
  "model" varchar,
  "year" varchar,
  "color" varchar,
  "max_speed" float,
  "weight" float,
  "height" float,
  "description" varchar,
  "current_pilot" int REFERENCES "user"(id),
  "pilot_count" int,
  "available" boolean,
  "confidential" boolean
);

CREATE TABLE "picture" (
  "id" SERIAL PRIMARY KEY,
  "file" BYTEA,
  "mech_id" integer
);

CREATE TABLE "rating" (
  "id" SERIAL PRIMARY KEY,
  "user_id" integer,
  "mech_id" integer,
  "stars" integer,
  "review" varchar
);

SELECT * FROM "user";
SELECT * FROM "contact_info";
SELECT * FROM "mech";
SELECT * FROM "picture";
SELECT * FROM "rating";


ALTER TABLE "contact_info" ADD FOREIGN KEY ("user_id") REFERENCES "user" ("id");

-- ALTER TABLE "mech"  ADD FOREIGN KEY ("current_pilot") REFERENCES  "user" ("id");

ALTER TABLE "picture" ADD FOREIGN KEY ("mech_id") REFERENCES "mech" ("id");

ALTER TABLE "rating" ADD FOREIGN KEY ("user_id") REFERENCES "user" ("id");

ALTER TABLE "rating" ADD FOREIGN KEY ("mech_id") REFERENCES "mech" ("id");

--SAMPLE DATA

INSERT INTO "user" VALUES
(DEFAULT,'tsnark', 'password', 'Tommy', 'Snark', TRUE, TRUE),
(DEFAULT, 'scari', 'password', 'Sinji', 'Cari', TRUE, FALSE);

INSERT INTO "mech" VALUES
(
	DEFAULT,
	'Snark Industries',
	'Copper Man MK. IV',
	'2008',
	'Green',
	100,
	300,
	2,
	'A suit of mechanized armor created for counter-terrorism. This suit is fully flight capable and includes a multitude of lethal and non-lethal combatitve options',
	NULL,
	1,
	TRUE,
	FALSE
),
(
	DEFAULT,
	'Hasis',
	'Wattron',
	'2016',
	'Blue',
	800,
	1000,
	15,
	'A Mech designed for combatting threats high in the atmosphere. Fully capable of flight and weapons designed for air-to-air combat.',
	NULL,
	5,
	FALSE,
	FALSE
);

INSERT INTO public.mech (make,model,"year",color,max_speed,weight,height,description,current_pilot,pilot_count,available,confidential) VALUES
     (' prototype close combat mobile suit',' RX-78-2/RX-78-02',' UC 0079','Blue, Red and White',205.0,60000.0,18.0,'The Gundam implemented multiple new technologies, including the Core Block System, in which the cockpit transformed into the FF-X7 Core Fighter to increase pilot survivability (and secure valuable combat data). The Gundam also featured a learning computer that learned from a pilot''s input, and this data was used in the development of the mass produced RGM-79 GM. The Gundam''s other innovations included beam sabers and an energy cap-based beam rifle, which gave the suit the firepower of a battleship.',3,1,true,false),
     ('test','test','test','test',0.0,0.0,0.0,'test',1,1,false,false),
     ('test','test','test','test',0.0,0.0,0.0,'test',1,1,false,false),
     ('test','test','test','test',0.0,0.0,0.0,'test',1,1,false,false);
INSERT INTO public.rating (user_id,mech_id,stars,review) VALUES
     (1,1,5,'Was pretty good.'),
     (3,1,2,'Far too small to be a real mech.'),
     (3,3,5,'This is a test'),
     (3,3,5,'This is a test');
INSERT INTO public."user" (username,"password",firstname,lastname,is_pilot,is_admin) VALUES
     ('Rjose','password','Ryu','Jose',true,true),
     ('test','pTest','fnTest','lnTest',true,false);
     
-- Original File ENDPOINT

-- Keith INSERT VALUES from Discord Chat Below

INSERT INTO public.mech (make,model,"year",color,max_speed,weight,height,description,current_pilot,pilot_count,available,confidential) VALUES
     (' prototype close combat mobile suit',' RX-78-2/RX-78-02',' UC 0079','Blue, Red and White',205.0,60000.0,18.0,'The Gundam implemented multiple new technologies, including the Core Block System, in which the cockpit transformed into the FF-X7 Core Fighter to increase pilot survivability (and secure valuable combat data). The Gundam also featured a learning computer that learned from a pilot''s input, and this data was used in the development of the mass produced RGM-79 GM. The Gundam''s other innovations included beam sabers and an energy cap-based beam rifle, which gave the suit the firepower of a battleship.',3,1,true,false),
     ('test','test','test','test',0.0,0.0,0.0,'test',1,1,false,false),
     ('test','test','test','test',0.0,0.0,0.0,'test',1,1,false,false),
     ('test','test','test','test',0.0,0.0,0.0,'test',1,1,false,false);
INSERT INTO public.rating (user_id,mech_id,stars,review) VALUES
     (1,1,5,'Was pretty good.'),
     (3,1,2,'Far too small to be a real mech.'),
     (3,3,5,'This is a test'),
     (3,3,5,'This is a test');
INSERT INTO public."user" (username,"password",firstname,lastname,is_pilot,is_admin) VALUES
     ('Rjose','password','Ryu','Jose',true,true),
     ('test','pTest','fnTest','lnTest',true,false);
