DROP TABLE IF EXISTS "user" CASCADE;
DROP TABLE IF EXISTS "contact_info" CASCADE;
DROP TABLE IF EXISTS "mech" CASCADE;
DROP TABLE IF EXISTS "picture" CASCADE;
DROP TABLE IF EXISTS "rating" CASCADE;

CREATE TABLE "user" (
  "id" SERIAL PRIMARY KEY,
  "username" varchar,
  "password" varchar,
  "is_pilot" boolean,
  "is_admin" boolean
);

CREATE TABLE "contact_info" (
  "id" SERIAL PRIMARY KEY,
  "user_id" integer,
  "contact" varchar
);

CREATE TABLE "mech" (
  "id" SERIAL PRIMARY KEY,
  "make" varchar,
  "model" varchar,
  "year" varchar,
  "color" varchar,
  "max_speed" float,
  "weight" float,
  "height" float,
  "description" varchar,
  "current_pilot" int REFERENCES "user"(id),
  "pilot_count" int,
  "available" boolean,
  "confidential" boolean
);

CREATE TABLE "picture" (
  "id" SERIAL PRIMARY KEY,
  "file" BYTEA,
  "mech_id" integer
);

CREATE TABLE "rating" (
  "id" SERIAL PRIMARY KEY,
  "user_id" integer,
  "mech_id" integer,
  "stars" integer,
  "review" varchar
);

SELECT * FROM "user";
SELECT * FROM "contact_info";
SELECT * FROM "mech";
SELECT * FROM "picture";
SELECT * FROM "rating";


ALTER TABLE "contact_info" ADD FOREIGN KEY ("user_id") REFERENCES "user" ("id");

-- ALTER TABLE "user" ADD FOREIGN KEY ("id") REFERENCES "mech" ("current_pilot");

ALTER TABLE "picture" ADD FOREIGN KEY ("mech_id") REFERENCES "mech" ("id");

ALTER TABLE "rating" ADD FOREIGN KEY ("user_id") REFERENCES "user" ("id");

ALTER TABLE "rating" ADD FOREIGN KEY ("mech_id") REFERENCES "mech" ("id");